# dycast 页面入口说明

## 🎯 已添加的入口

### 1. 侧边栏菜单入口 ⭐推荐

在 Dashboard 左侧菜单中添加了"弹幕监控 (dycast)"选项，带有绿色"推荐"标签。

**位置**：Dashboard → 左侧菜单 → "弹幕监控 (dycast)"

```
仪表盘
直播监控
弹幕监控 (dycast) [推荐]  ← 新增！
历史记录
系统设置
```

### 2. 快速操作按钮 ⭐推荐

在 Dashboard 主页的"快速操作"卡片中添加了大号主按钮。

**位置**：Dashboard → 快速操作 → "弹幕监控 (dycast)"

```
[弹幕监控 (dycast) 推荐]  ← 大号主按钮
[直播监控 (旧版)]
[连接打印机]
[打印测试页]
[刷新统计]
```

### 3. 直接 URL 访问

也可以直接在浏览器中访问：
```
http://localhost:5173/#/live-room-dycast
```

## 📊 页面对比

| 特性 | dycast 页面 (新) | LiveRoom 页面 (旧) |
|------|-----------------|-------------------|
| **路由** | `/live-room-dycast` | `/live-room` |
| **需要登录** | ❌ 否 | ✅ 是 |
| **需要 Cookie** | ❌ 否 | ✅ 是 |
| **稳定性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| **性能** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| **重连机制** | ✅ 自动 | ❌ 无 |
| **心跳检测** | ✅ 自动 | ❌ 依赖页面 |
| **弹幕类型** | ✅ 全部支持 | ⚠️ 部分支持 |

## 🚀 使用流程

1. **启动应用**
   ```bash
   npm run electron:dev
   ```

2. **登录** (可选)
   - dycast 页面不需要登录
   - 但建议登录以使用完整功能

3. **访问 dycast 页面**
   - 点击侧边栏"弹幕监控 (dycast)"
   - 或点击快速操作中的大按钮

4. **输入房间信息**
   - 输入完整URL：`https://live.douyin.com/119654537680`
   - 或直接输入房间号：`119654537680`

5. **开始监控**
   - 点击"开始监控"按钮
   - 观察连接状态和弹幕流

## 🎨 UI 特点

### 布局
- **左侧面板**：控制区
  - 直播间信息
  - 输入框
  - 控制按钮
  - 统计信息

- **右侧面板**：弹幕流
  - 实时弹幕列表
  - 深色背景
  - 自动滚动

### 状态显示
- 🟢 **已连接** - 绿色标签
- 🟡 **重连中 (X/3)** - 黄色标签
- ⚪ **未连接** - 灰色标签

### 弹幕类型颜色
- 💬 **聊天** - 蓝色边框
- 🎁 **礼物** - 红色边框和背景
- 👋 **进入** - 绿色边框和背景
- ❤️ **关注** - 橙色边框和背景
- 👍 **点赞** - 红色边框和背景

## 💡 小贴士

### 1. 如何找到房间号？

**方法一**：从 URL 提取
```
https://live.douyin.com/119654537680
                      └─────────┘
                        房间号
```

**方法二**：抖音 APP
1. 打开直播间
2. 点击"分享"
3. 复制链接
4. 粘贴到输入框

### 2. 连接失败怎么办？

1. **检查网络**：确保能访问抖音
2. **检查房间号**：确认房间号正确
3. **查看控制台**：按 F12 查看详细错误
4. **重试连接**：停止后重新开始

### 3. 弹幕显示不全？

- dycast 支持所有弹幕类型
- 如果某些类型不显示，可能是：
  - 直播间没有该类型弹幕
  - Protobuf 解析问题（查看控制台）

### 4. 如何清空弹幕？

点击"清空弹幕"按钮即可清空当前显示的弹幕列表（不影响连接）。

### 5. 可以同时监控多个直播间吗？

当前版本每次只能监控一个直播间。如需监控多个：
- 停止当前监控
- 输入新房间号
- 开始监控

## 🔧 开发者信息

### 相关文件
- `src/views/LiveRoomDycast.vue` - 页面组件
- `src/composables/useDycast.ts` - Composable
- `dycast/src/core/dycast.ts` - 核心逻辑
- `public/mssdk.js` - 抖音 SDK

### 调试技巧

**查看详细日志**：
```javascript
// 在浏览器控制台
// 可以看到完整的连接过程和弹幕数据
```

**常见日志**：
```
🚀 开始连接直播间: 119654537680
🔍 获取直播间信息...
✅ 直播间信息已获取
🔐 计算 signature...
✅ signature 计算成功
📡 获取连接信息...
✅ 连接信息已获取
🔗 建立 WebSocket 连接...
✅ 连接成功: [主播昵称]
📨 收到 X 条弹幕
```

## 📝 更新日志

### v1.0.0 (2025-11-27)
- ✅ 集成 dycast 核心
- ✅ 创建 LiveRoomDycast 页面
- ✅ 添加侧边栏入口
- ✅ 添加快速操作按钮
- ✅ 完整的弹幕类型支持
- ✅ 自动重连机制
- ✅ 美化的 UI 设计

---

**现在就去试试吧！** 🎊

点击侧边栏的"弹幕监控 (dycast)"或快速操作中的大按钮！


